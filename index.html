<!DOCTYPE html>
<html lang="en">
<head>
  <title>GeoVisualizer Client</title>
  <meta charset="UTF-8" />
  <script>
    "use strict";
    // Initialize everything when the window finishes loading
    window.addEventListener("load", function(event) {
      var status = document.getElementById("status");
      var url = document.getElementById("url");
      var open = document.getElementById("open");
      var close = document.getElementById("close");
      var send = document.getElementById("send");
      var text = document.getElementById("text");
      var message = document.getElementById("message");
      var socket;

      status.textContent = "Not Connected";
      url.value = "ws://geovisualizer.1ec1.dev-preview-int.openshiftapps.com:80/ws/";
      close.disabled = true;
      send.disabled = true;

      // Create a new connection when the Connect button is clicked
      open.addEventListener("click", function(event) {
        open.disabled = true;
        socket = new WebSocket(url.value, "echo-protocol");

        socket.addEventListener("open", function(event) {
          close.disabled = false;
          send.disabled = false;
          status.textContent = "Connected";
        });

        // Display messages received from the server
        socket.addEventListener("message", function(event) {
          message.textContent = "Server Says: " + event.data;
        });

        // Display any errors that occur
        socket.addEventListener("error", function(event) {
          message.textContent = "Error: " + event;
        });

        socket.addEventListener("close", function(event) {
          open.disabled = false;
          status.textContent = "Not Connected";
        });
      });

      // Close the connection when the Disconnect button is clicked
      close.addEventListener("click", function(event) {
        close.disabled = true;
        send.disabled = true;
        message.textContent = "";
        socket.close();
      });

      // Send text to the server when the Send button is clicked
      send.addEventListener("click", function(event) {
        socket.send(text.value);
        text.value = "";
      });
    });
  </script>
</head>
<body onload="onload();">
  Status: <span id="status"></span><br />
  URL: <input id="url" /><br />
  <input id="open" type="button" value="Connect" />&nbsp;
  <input id="close" type="button" value="Disconnect" /><br />
  <input id="send" type="button" value="Send" />&nbsp;
  <input id="text" /><br />
  <span id="message"></span>
  
    <script src="//d3js.org/d3.v3.min.js"></script>
  <script src="//d3js.org/queue.v1.min.js"></script>
  <script src="//d3js.org/topojson.v1.min.js"></script>
  <script src="/public/mbostock/raw/4090846/globe.js"></script>

  <section class='container'>
    <hgroup>
      <input type="text" name="enter" class="enter" value="" id="input"/>
      <input type="button" value="click" OnClick="kk()"/>
      <script type="text/javascript">
        var lolz;
        function onload() { 
          lolz = document.getElementById('input');
        }
        function kk(){
          //alert(input.value);
          transition(input.value);
        }
      </script>
    </hgroup>
   </section>
   <section class='container'>
    <hgroup>
      <h1></h1>
    </hgroup>
   </section>
    
  <section class='container'>
    <hgroup>
      <p id="message">Test Deploy #24 - Welcome to your Node.js application on OpenShift</p>
      <p id="log"></p>
    </hgroup>
   </section>
    <table id="table"></table>
 
  
  
</body>
</html>